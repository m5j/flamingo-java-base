
## 原子操作CAS

### syn也是原子操作
是基于阻塞的锁机制的，所以有几个问题，一般不用这个来做原子操作
1.被阻塞的线程优先级很高怎么办
2.拿到锁的线程一直不释放怎么办
3.大量线程竞争会浪费CPU，同时带来死锁或者其他安全问题


### CAS的原理（Compare And Swap）
利用了现在处理器都支持的CAS指令，循环这个指令，直到成功为止（指令级别保证这是一个原子操作）
三个运算符：内存地址V 期望值A 新值B
基本思路：如果地址V上的值和我期望的值A相等，就给V赋一个新值B
我的理解：CPU去更新一个值，但如果想改的值不再是原来的值，操作就失败，因为很明显，有其它操作先改变了这个值。
CAS算法其实就是一种乐观锁

### CAS的问题
ABA问题
开销问题
只能保证一个共享变量的原子操作





